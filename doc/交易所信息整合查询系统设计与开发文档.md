# 交易所信息整合查询系统 设计文档 & 开发文档

## 一、项目背景与目标

本系统旨在为用户提供一个整合各主流交易所充值、提现通道状态及代币合约地址的查询平台。通过后台定时刷新数据，前端页面可便捷查询各交易所、各代币、各链的充提状态和合约信息，提升信息透明度和查询效率。

---

## 二、功能需求

### 1. 后台功能
- 定时刷新并拉取各交易所支持币种的充值、提现通道状态及合约地址信息。
- 数据以JSON文件形式本地存储，避免使用数据库。
- 支持灵活配置刷新频率（如每5分钟、每小时等）。
- 记录每次数据更新时间。

### 2. 前端功能
- 显示数据的“上次更新时间”。
- 提供下拉框选择要查询的代币。
- 查询后以表格形式展示：每个交易所该代币支持链的充提状态和合约地址。
- 交互简洁，支持移动端和桌面端浏览。

---

## 三、技术架构设计

### 1. 总体架构
- **后端**：Node.js/Express（建议，或Python Flask/FastAPI，具体待定），负责定时任务和API接口。
- **前端**：React/Vue/原生JS（建议React，具体待定），负责页面展示和交互。
- **数据存储**：本地JSON文件，按需分目录管理。
- **部署**：可本地或云服务器，支持静态资源和简单API服务。

### 2. 组件划分
- 数据采集与刷新模块（定时任务）
- JSON数据存储与读取模块
- API接口模块
- 前端页面模块（下拉查询、表格展示、更新时间）

---

## 四、数据结构设计

### 1. JSON数据样例（建议结构）

```json
{
  "last_update": "2025-06-24T21:16:09+08:00",
  "tokens": [
    {
      "symbol": "USDT",
      "name": "Tether USD",
      "exchanges": [
        {
          "name": "Binance",
          "chains": [
            {
              "chain": "ERC20",
              "deposit_status": "open",
              "withdraw_status": "closed",
              "contract_address": "0xdAC17F958D2ee523a2206206994597C13D831ec7"
            }
          ]
        }
      ]
    }
  ]
}
```
**疑问：**
- 交易所、链、币种的完整列表来源？由用户维护还是可自动发现？
 答：在part3文档中包含了每个交易所充值提现状态、代币合约地址的API接口，注意每个交易所返回的数据结构和字段可能不同，需要按实际返回数据做兼容合并
- 合约地址是否只需主合约，还是需支持多合约/多链？
 答：如果代币支持多链，则需要输出多链充提状态和合约地址
- 充值/提现状态的标准字段有哪些？是否有更多状态（如“维护中”）？
 答：查看part3文档中各个交易所的API接口，和返回数据字段

---

## 五、后端设计

### 1. 定时任务
- 使用Node.js `node-cron` 或 Python `APScheduler` 实现。
- 定时拉取各交易所API或解析网页，更新JSON文件。
- 拉取失败时保留上次数据，并记录错误日志。

### 2. API接口
- `/api/tokens`：获取所有支持的代币列表
- `/api/status?symbol=USDT`：获取指定代币的所有交易所充提状态及合约信息
- `/api/last_update`：获取数据最后更新时间

**疑问：**
- 是否需要鉴权或IP限制？
 答：预留鉴权接口，实际使用时可添加
- 是否需要支持多语言？
 答：不需要

---

## 六、前端设计

### 1. 页面结构
- 顶部显示“上次更新时间”
- 下拉选择代币
- 查询按钮
- 表格展示结果（交易所、链、充值状态、提现状态、合约地址）

### 2. 技术选型
- 推荐React（或Vue），但可根据实际情况调整
- UI组件尽量原生或极简，深色系UI

---

## 七、开发流程

### 1. 环境准备
- 配置.env和config文件（由用户提供）
- 安装依赖（Node.js/Python及前端依赖）

### 2. 后端开发
- 实现定时任务与数据采集
- 设计并实现API接口
- JSON文件读写和错误处理

### 3. 前端开发
- 页面布局与样式
- 下拉选择与表格展示
- API对接与数据渲染

### 4. 测试
- 单元测试（如有）
- 手动测试主要功能与异常情况

---

## 八、部署与运维

- 推荐使用PM2或Supervisor管理后端服务
- 前端可静态部署（如nginx、Vercel等）
- 定期备份JSON数据文件
- 监控日志与错误

---

## 九、待补充/待确认问题

1. 交易所及链的完整列表如何维护？
答：支持的交易所根据config文件确认，代币支持的链信息根据part3文档中的API接口确认
2. 合约地址是否需要支持多合约/多链？
答：如果代币支持多链，则需要输出多链充提状态和合约地址
3. 充值/提现状态字段是否有详细定义？
答：查看part3文档中各个交易所的API接口，和返回数据字段
4. 是否需要API鉴权或访问限制？
答：预留API鉴权接口，实际使用时可添加
5. 是否有多语言需求？
答：不需要
6. 计划采用哪种前端/后端技术栈（如有指定请补充）？
答：后端使用Node.js/Express，前端使用React/Vue/原生JS

---

如需补充或调整，请直接回复或补充相关信息。待确认上述疑问后，可进一步细化开发细节和代码实现建议。
